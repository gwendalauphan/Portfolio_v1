---
- name: Mettre à jour le site web

  hosts: server_ovh
  become: yes
  gather_facts: yes 
  remote_user: rocky

  tasks:


  - name: Synchroniser le répertoire de l'application React vers le serveur
    synchronize:
      src: "../../new_site/"
      dest: "/tmp/new_site/"
      delete: yes
    become: yes

  - name: Lancer le conteneur via Docker Compose
    command:
      cmd: "docker compose -f /tmp/container_web.docker-compose.yml up -d --build"
      chdir: /tmp/
    become: yes


